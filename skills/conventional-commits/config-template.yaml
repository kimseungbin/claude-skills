# Conventional Commits Configuration Template
# Copy this file to .claude/config/conventional-commits.yaml and customize for your project

# Select implementation guide (optional)
# Available: infrastructure, frontend, backend, fullstack
# implementation: infrastructure

# Project metadata
project: your-project-name
description: "Brief description of your project"

# Commit message format
format:
  pattern: "{type}({scope}): {subject}"
  max_subject_length: 72
  max_body_line_length: 100

# Default type definitions
# Projects can override these by redefining in their config
types:
  feat:
    description: "A new feature or capability"
    when: "Adds user-visible or application-facing functionality"
    not_for:
      - "CI/CD tooling (use chore)"
      - "Developer tools (use chore)"
      - "Internal refactoring (use refactor)"
    examples:
      - "feat(api): Add user authentication endpoint"
      - "feat(ui): Add dark mode toggle"
      - "feat(database): Add user roles table"

  fix:
    description: "A bug fix"
    when: "Fixes broken behavior or misconfiguration"
    examples:
      - "fix(api): Correct validation error messages"
      - "fix(ui): Fix button alignment on mobile"
      - "fix(database): Add missing index for performance"

  refactor:
    description: "Code change that neither fixes bug nor adds feature"
    when: "Restructuring code without changing behavior"
    not_for:
      - "Adding features (use feat)"
      - "Fixing bugs (use fix)"
    examples:
      - "refactor(api): Extract validation logic to middleware"
      - "refactor(ui): Split monolithic component into smaller parts"
      - "refactor(database): Rename columns for consistency"

  perf:
    description: "Performance improvement"
    when: "Optimizing code for speed or resource usage"
    examples:
      - "perf(api): Add database query caching"
      - "perf(ui): Lazy load images"
      - "perf(database): Optimize slow query with index"

  test:
    description: "Adding or updating tests"
    when: "Test-only changes (no implementation code)"
    examples:
      - "test(api): Add integration tests for auth"
      - "test(ui): Add E2E tests for checkout flow"
      - "test(database): Add migration rollback tests"

  docs:
    description: "Documentation changes only (no code logic changes)"
    when: "Standalone documentation commits"
    not_for: "Documentation accompanying code change (use code's type)"
    examples:
      - "docs(project): Add API documentation to README"
      - "docs(inline): Add JSDoc comments to utility functions"
      - "docs(project): Update deployment guide"

  style:
    description: "Code style changes (formatting, whitespace)"
    when: "Formatting changes only (no logic changes)"
    examples:
      - "style(api): Format code with Prettier"
      - "style(ui): Fix indentation"
      - "style(project): Organize imports"

  build:
    description: "Build system or dependency changes"
    when: "Changes to build tools, package.json, tsconfig.json"
    examples:
      - "build(project): Update TypeScript to v5"
      - "build(project): Add esbuild configuration"
      - "build(project): Optimize webpack bundle size"

  ci:
    description: "CI/CD configuration changes (GitHub Actions workflows)"
    when: "Changes to .github/workflows/"
    note: "Use for executable CI/CD automation only"
    examples:
      - "ci(tools): Add automated testing workflow"
      - "ci(tools): Add deployment pipeline"
      - "ci(tools): Add security scanning"

  chore:
    description: "Other changes that don't modify src or test files"
    when: "Maintenance tasks, tooling, dependencies"
    subtypes:
      deployment: "CI/CD pipeline infrastructure"
      tools: "Developer tooling (linters, hooks, scripts)"
      monorepo: "Workspace dependencies and build config"
      github: "GitHub meta files (PR templates, CODEOWNERS)"
    examples:
      - "chore(monorepo): Update workspace dependencies"
      - "chore(tools): Add ESLint configuration"
      - "chore(github): Add PR template"
      - "chore(deployment): Add pipeline notifications"

# Scopes - CUSTOMIZE THESE FOR YOUR PROJECT
# Define scopes based on your project structure
scopes:
  # Example infrastructure scopes (delete if not applicable)
  lambda:
    description: "Lambda function changes"
    patterns:
      - "lib/constructs/lambda/**"
      - "packages/lambda/**"

  cloudfront:
    description: "CloudFront distribution changes"
    patterns:
      - "lib/constructs/cloudfront/**"

  # Example frontend scopes (delete if not applicable)
  components:
    description: "UI component changes"
    patterns:
      - "src/components/**"
      - "components/**"

  hooks:
    description: "React hooks or similar"
    patterns:
      - "src/hooks/**"
      - "hooks/**"

  # Example backend scopes (delete if not applicable)
  api:
    description: "API endpoint changes"
    patterns:
      - "src/api/**"
      - "api/**"

  services:
    description: "Service layer changes"
    patterns:
      - "src/services/**"
      - "services/**"

  # Common scopes for all projects
  config:
    description: "Configuration system changes"
    patterns:
      - "src/config/**"
      - "config/**"
      - "types/**"

  tools:
    description: "Developer tooling (git hooks, scripts, linters, CI/CD)"
    patterns:
      - ".githooks/**"
      - "scripts/**"
      - ".eslintrc*"
      - ".prettierrc*"
      - ".github/workflows/**"
      - ".github/actions/**"

  github:
    description: "GitHub meta files (PR templates, CODEOWNERS, issue templates)"
    note: "Use chore(github) for GitHub repository configuration files that are not CI/CD workflows"
    patterns:
      - ".github/pull_request_template.md"
      - ".github/PULL_REQUEST_TEMPLATE/**"
      - ".github/ISSUE_TEMPLATE/**"
      - ".github/CODEOWNERS"
      - ".github/*.md"

  project:
    description: "Project-wide documentation and metadata"
    patterns:
      - "CLAUDE.md"
      - "README.md"
      - "*.md"

  monorepo:
    description: "Workspace-level changes (root configuration and workspace package.json files)"
    patterns:
      - "package.json"
      - "package-lock.json"
      - "tsconfig.json"
      - "packages/*/package.json"

# Commit message conventions
conventions:
  subject:
    - "Use imperative mood: 'Add feature' not 'Added feature'"
    - "Capitalize first letter"
    - "No period at the end"
    - "Be specific but concise"
    - "Name specific components/sections changed, not just file names"
    - "Avoid vague verbs: Use 'Add X section', 'Remove Y section', 'Move Z from A to B' instead of 'Refactor', 'Update', 'Improve'"

  body:
    - "Separate from subject with blank line"
    - "Explain what and why, not how"
    - "Use bullet points for multiple changes"
    - "Wrap at 100 characters"

  footer:
    - "Breaking changes: 'BREAKING CHANGE: description'"
    - "Issue references: 'Refs #123' or 'Closes #123'"
    - "REQUIRED: Always add 'Skill: conventional-commits' to mark skill usage"

# Example commit (shows complete format)
examples:
  feature_example:
    message: "feat(api): Add user authentication endpoint"
    body: |
      Implement JWT-based authentication for user login.

      - Add /auth/login endpoint
      - Add JWT token generation
      - Add token validation middleware

      Skill: conventional-commits
    rationale: "New API endpoint is a feature"

  fix_example:
    message: "fix(ui): Correct button alignment on mobile"
    body: |
      Fix flexbox layout causing buttons to overlap on small screens.

      - Update CSS media query for mobile
      - Adjust padding and margins
      - Test on iPhone and Android

      Skill: conventional-commits
    rationale: "Fixing broken behavior"

  chore_github_example:
    message: "chore(github): Add PR template with deployment checklist"
    body: |
      Add pull request template to standardize PR descriptions.

      - Add deployment impact section
      - Add testing checklist
      - Add review guidelines

      Skill: conventional-commits
    rationale: "GitHub meta files use chore(github), not feat or ci"
